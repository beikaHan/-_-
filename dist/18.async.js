(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{cm2f:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("/xke");var l=n(a("TeRw")),s=n(a("MVZn")),r=n(a("o0o1")),c=(n(a("wd/R")),a("b/c7")),o=a("dCQc"),u=a("7Qib"),d={namespace:"manage",state:{loading:!1,manageData:{list:[],pagination:{}},schoolItem:{}},subscriptions:{setup:function(e){e.dispatch,e.history}},effects:{getSchoolList:r.default.mark(function e(t,a){var n,l,s,u,d,i,p;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,t.callback,l=a.call,a.select,s=a.put,u={rows:n&&n.rows?n.rows:10,page:n&&n.page?n.page:1,title:n&&n.titleS?n.titleS:""},e.next=5,l(o.getSchool,u);case 5:if(d=e.sent,(0,c.validResult)(d)){e.next=8;break}return e.abrupt("return");case 8:return i={},p={},p.current=d.data.current?parseInt(d.data.current):1,p.pageSize=d.data.size?parseInt(d.data.size):10,p.total=parseInt(d.data.total),i.pagination=p,i.list=d.data.list,e.next=17,s({type:"saveSchoolData",payload:i});case 17:case"end":return e.stop()}},e,this)}),addSchoolData:r.default.mark(function e(t,a){var n,d,i,p,f,h,w,g,v;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,d=t.callback,i=a.call,a.select,p=a.put,f=(0,s.default)({},n.values),e.next=5,i(o.addSchoolData,f);case 5:if(h=e.sent,(0,c.validResult)(h)){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,i(o.getSchool,{});case 10:if(w=e.sent,(0,c.validResult)(w),(0,u.getSchoolInfo)()&&0!=(0,u.getSchoolInfo)().length){e.next=19;break}return g={schoolId:w.data.list[0].id},e.next=16,i(o.getChangeSchool,g);case 16:v=e.sent,(0,c.validResult)(v),location.reload();case 19:return(0,u.setSchoolInfo)(w.data.list),l.default.success({message:"\u64cd\u4f5c\u6210\u529f"}),e.next=23,p({type:"getSchoolList",payload:(0,s.default)({},n.searchVal)});case 23:d&&d();case 24:case"end":return e.stop()}},e,this)}),getSchoolItem:r.default.mark(function e(t,a){var n,l,s,u,d;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,t.callback,l=a.call,a.select,s=a.put,u={id:n.id},e.next=5,l(o.getSchoolItem,u);case 5:if(d=e.sent,(0,c.validResult)(d)){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,s({type:"saveCP",payload:{schoolItem:d.data.school}});case 10:case"end":return e.stop()}},e,this)}),uptSchoolData:r.default.mark(function e(t,a){var n,u,d,i,p,f;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,u=t.callback,d=a.call,a.select,i=a.put,p=(0,s.default)({},n.values),e.next=5,d(o.uptSchoolItem,p);case 5:if(f=e.sent,(0,c.validResult)(f)){e.next=8;break}return e.abrupt("return");case 8:return l.default.success({message:"\u64cd\u4f5c\u6210\u529f"}),e.next=11,i({type:"getSchoolList",payload:(0,s.default)({},n.searchVal)});case 11:u&&u();case 12:case"end":return e.stop()}},e,this)}),delSchoolData:r.default.mark(function e(t,a){var n,u,d,i,p,f;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,u=t.callback,d=a.call,a.select,i=a.put,console.log(n),p={ids:n&&n.ids?n.ids:[]},e.next=6,d(o.delSchool,p);case 6:if(f=e.sent,(0,c.validResult)(f)){e.next=9;break}return e.abrupt("return");case 9:return l.default.success({message:"\u64cd\u4f5c\u6210\u529f"}),e.next=12,i({type:"getSchoolList",payload:(0,s.default)({},n.searchVal)});case 12:u&&u();case 13:case"end":return e.stop()}},e,this)}),downloadQrcode:r.default.mark(function e(t,a){var n,l,s;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,t.callback,l=a.call,a.select,a.put,s={id:n&&n.schoolId?n.schoolId:0},e.next=5,l(o.downloadQrcode,s);case 5:e.sent;case 6:case"end":return e.stop()}},e,this)})},reducers:{changeLoading:function(e,t){return(0,s.default)({},e,{loading:t.payload})},saveCP:function(e,t){return(0,s.default)({},e,t.payload)},saveSchoolData:function(e,t){return(0,s.default)({},e,{manageData:t.payload})}}};t.default=d}}]);