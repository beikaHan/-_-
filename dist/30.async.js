(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"9z5M":function(e,t,a){"use strict";var l=a("284h"),n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var o=n(a("wCAj")),d=n(a("MVZn"));a("/zsF");var u=n(a("PArb")),i=n(a("lwsE")),r=n(a("W8MJ")),s=n(a("a1gu")),c=n(a("Nsbk")),f=n(a("7W2i")),p=l(a("q1tI")),h=(n(a("wd/R")),n(a("sSqL"))),m=function(e){function t(){var e,a;(0,i.default)(this,t);for(var l=arguments.length,n=new Array(l),o=0;o<l;o++)n[o]=arguments[o];return a=(0,s.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(n))),a.state={selectedRowKeys:[]},a.handleRowSelectChange=function(e,t){var l=t.reduce(function(e,t){return(e||0)+parseFloat(t.callNo||0,10)},0);a.props.onSelectRow&&a.props.onSelectRow(t),a.setState({selectedRowKeys:e,totalCallNo:l})},a.cleanSelectedKeys=function(){a.handleRowSelectChange([],[])},a.handleTableChange=function(e,t,l){a.props.onChange(e,t,l)},a.handleInfo=function(e){a.props.handleInfo(e)},a.delInfo=function(e){a.props.delInfo(e)},a.uptInfo=function(e,t){a.props.uptInfo(e,t)},a.downloadQrcode=function(e){a.props.downloadQrcode(e)},a}return(0,f.default)(t,e),(0,r.default)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,l=a.list,n=a.pagination,i=t.loading,r=this.state.selectedRowKeys,s=[{title:"\u7ec4\u9898\u6807\u9898",dataIndex:"title",key:"title",className:h.default.allWidth},{title:"\u96be\u6613\u5ea6",dataIndex:"level",key:"level",className:h.default.allWidth,render:function(e,t){return p.default.createElement("div",{className:h.default.handle},1==e?"\u7b80\u5355":2==e?"\u6b63\u5e38":"\u56f0\u96be")}},{title:"\u4e8c\u7ef4\u7801",dataIndex:"qrCode",key:"qrCode",className:h.default.allWidth,render:function(t,a){return p.default.createElement("div",{className:h.default.handle},p.default.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.downloadQrcode(a)}},"\u4e0b\u8f7d"),p.default.createElement(u.default,{type:"vertical"}),p.default.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.downloadQrcode(a)}},"\u9884\u89c8"))}},{title:"\u591a\u5a92\u4f53\u72b6\u6001",dataIndex:"multiMediaState",key:"multiMediaState",className:h.default.allWidth,render:function(e,t){return p.default.createElement("div",null,1==e?"\u5f00\u542f":"\u5173\u95ed")}},{title:"\u64cd\u4f5c",key:"operate",className:h.default.brtWidth,align:"center",render:function(t,a){return p.default.createElement("div",{className:h.default.handle},p.default.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.delInfo(a)}},"\u5220\u9664"),p.default.createElement(u.default,{type:"vertical"}),p.default.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.uptInfo("edit",a)}},"\u4fee\u6539"))}}],c=(0,d.default)({showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100"]},n),f={selectedRowKeys:r,onChange:this.handleRowSelectChange,getCheckboxProps:function(e){return{disabled:e.disabled}}};return p.default.createElement("div",{className:"".concat(h.default.classManageTable," ").concat(h.default.manageTable)},p.default.createElement(o.default,{loading:i,rowKey:function(e){return e.id},dataSource:l,columns:s,rowSelection:f,pagination:c,onChange:this.handleTableChange}))}}]),t}(p.Component),g=m;t.default=g},MI6T:function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var o=l(a("2/Rp")),d=l(a("pVnL"));a("Pwec");var u=l(a("CtXQ"));a("nRaC");var i=l(a("5RzL")),r=l(a("lwsE")),s=l(a("W8MJ")),c=l(a("a1gu")),f=l(a("Nsbk")),p=l(a("7W2i"));a("sRBo");var h=l(a("kaz8"));a("5NDa");var m=l(a("5rEg"));a("OaEy");var g=l(a("2fM7"));a("7Kak");var y=l(a("9yH6"));a("y8nQ");var v,k,w=l(a("Vl3Y")),C=n(a("q1tI")),E=(l(a("wd/R")),a("MuoO"),l(a("sSqL"))),S=w.default.Item,M=(y.default.Button,y.default.Group),b=g.default.Option,T=(m.default.TextArea,h.default.Group,v=w.default.create(),v(k=function(e){function t(){var e,a;(0,r.default)(this,t);for(var l=arguments.length,n=new Array(l),o=0;o<l;o++)n[o]=arguments[o];return a=(0,c.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(n))),a.state={width:"100%"},a.resizeFooterToolbar=function(){var e=document.querySelectorAll(".ant-layout-sider")[0],t="calc(100% - ".concat(e.style.width,")");a.state.width!==t&&a.setState({width:t})},a.handleGoBack=function(){a.props.addHide()},a.handleChange=function(e){e.preventDefault(),a.props.add()},a.selectKnow=function(e){a.props.selectKnow(e)},a.changeUploadList=function(e,t){a.props.changeUploadList(e,t)},a.onUploadChange=function(e,t){a.props.onUploadChange(e.target.value,t)},a.onSingleS=function(e,t){a.props.onSingleChange(e,t)},a.onSelectChange=function(e){a.props.onSelectChange(e.target.value)},a.handleLoadData=function(e,t){for(var a=0;a<e.length;a++)t.push({title:e[a].name,value:e[a].id,key:e[a].id});return t},a}return(0,p.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeFooterToolbar)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeFooterToolbar)}},{key:"renderForm",value:function(){var e=this.props,t=e.itemId,a=e.addVisible,l=e.itemDetails,n=e.schoolQuestionTopicDataAll,r=(e.classifyDisplayData,e.addModalTitle),s=e.schoolQuestionBankDataAll,c=e.items,f=this.props.dispatch.form,p=f.getFieldDecorator,h=f.getFieldValue,v={labelCol:{span:4},wrapperCol:{xs:{span:28,offset:0},sm:{span:10,offset:0}}},k=[];s&&s.map(function(e){k.push({label:e.content,value:e.id})});var T=[];n&&n.map(function(e){T.push(C.default.createElement(b,{value:e.id,key:e.id},e.content))});var I=function(e){var t=[];if(e)for(var a=0;a<e.length;a++)t.push({label:e[a].content,value:e[a].id,key:e[a].id,id:e[a].id});return console.log(t),t},D={treeData:I(s),dropdownClassName:"gegionsTree",treeCheckStrictly:!0,placeholder:"\u8bf7\u9009\u62e9\u9898\u76ee",treeDefaultExpandAll:!1,treeCheckable:!0,showCheckedStrategy:i.default.SHOW_ALL,onChange:this.onChange};return C.default.createElement("div",{className:E.default.showAdd},C.default.createElement("div",{className:a?E.default.add:E.default.hideAdd},C.default.createElement("div",{className:E.default.nav},C.default.createElement(u.default,{type:"left",className:E.default.icon,onClick:this.handleGoBack})," ",r),C.default.createElement("div",{className:E.default.content},C.default.createElement(w.default,{onSubmit:this.handleChange,layout:"inline"},C.default.createElement(S,(0,d.default)({label:"\u6807\u9898"},v,{colon:!1}),p("title",{initialValue:""!=t&&l.title?l.title:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}]})(C.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",maxLength:"30",autoComplete:"off"}))),C.default.createElement(S,(0,d.default)({label:"\u63d0\u793a\u8bed"},v,{colon:!1}),p("content",{initialValue:""!=t&&l.content?l.content:""})(C.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165\u63d0\u793a\u8bed",maxLength:"30",autoComplete:"off"}))),C.default.createElement(S,(0,d.default)({label:"\u96be\u6613\u5ea6"},v,{colon:!1}),p("level",{initialValue:""!=t&&l.level?l.level:1})(C.default.createElement(g.default,{placeholder:1,getPopupContainer:function(){return document.getElementById("level")}},C.default.createElement(b,{value:1,key:1},"\u7b80\u5355"),C.default.createElement(b,{value:2,key:2},"\u666e\u901a"),C.default.createElement(b,{value:3,key:3},"\u56f0\u96be")))),C.default.createElement(S,(0,d.default)({label:"\u591a\u5a92\u4f53\u72b6\u6001"},v,{colon:!1}),p("multiMediaState",{initialValue:""!=t&&l.multiMediaState?l.multiMediaState:2})(C.default.createElement(M,null,C.default.createElement(y.default,{value:1,key:1},"\u5f00\u542f"),C.default.createElement(y.default,{value:2,key:2},"\u5173\u95ed")))),C.default.createElement(S,(0,d.default)({label:"\u51fa\u9898\u7c7b\u578b"},v,{colon:!1}),p("type",{initialValue:""!=t&&l.type?l.type:1})(C.default.createElement(g.default,{placeholder:1,getPopupContainer:function(){return document.getElementById("type")},onChange:this.selectKnow},C.default.createElement(b,{value:1,key:1},"\u968f\u673a\u51fa\u9898"),C.default.createElement(b,{value:2,key:2},"\u77e5\u8bc6\u70b9\u51fa\u9898"),C.default.createElement(b,{value:3,key:3},"\u81ea\u5b9a\u4e49\u9898\u76ee")))),2==h("type")?C.default.createElement(S,(0,d.default)({label:"\u77e5\u8bc6\u70b9"},v,{colon:!1,className:E.default.answer}),p("questionTopicId",{initialValue:""!=t&&void 0!=l.questionTopicId?l.questionTopicId:n&&n[0]?n[0].id:"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u77e5\u8bc6\u70b9"}]})(C.default.createElement(g.default,{placeholder:"\u8bf7\u9009\u62e9\u77e5\u8bc6\u70b9"},T))):null,3==h("type")?C.default.createElement(S,(0,d.default)({label:"\u9898\u76ee"},v,{colon:!1}),p("schoolQuestionBankId",{initialValue:""!=t&&c?I(c):{key:s&&s[0]&&s[0].content,value:s&&s[0]&&s[0].id},rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9898\u76ee"}]})(C.default.createElement(i.default,D))):null,C.default.createElement("span",{style:{width:"100%",display:"block",textAlign:"center"}},C.default.createElement(o.default,{type:"primary",htmlType:"submit",style:{marginRight:"20px",padding:"0 50px"}},"\u4fdd\u5b58"),C.default.createElement(o.default,{htmlType:"submit",onClick:this.handleGoBack,style:{padding:"0 50px"}},"\u53d6\u6d88"))))))}},{key:"render",value:function(){return C.default.createElement("div",null,this.renderForm())}}]),t}(C.Component))||k),I=T;t.default=I},vOzi:function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var o=l(a("bx4M"));a("qVdP");var d=l(a("jsC+"));a("lUTK");var u=l(a("BvKs"));a("jCWc");var i=l(a("kPKH"));a("+L6B");var r=l(a("2/Rp"));a("Pwec");var s=l(a("CtXQ"));a("/xke");var c=l(a("TeRw")),f=l(a("MVZn")),p=l(a("lwsE")),h=l(a("W8MJ")),m=l(a("a1gu")),g=l(a("Nsbk")),y=l(a("7W2i")),v=l(a("PJYZ"));a("5NDa");var k=l(a("5rEg"));a("OaEy");var w=l(a("2fM7"));a("y8nQ");var C=l(a("Vl3Y"));a("7Kak");var E=l(a("9yH6"));a("2qtc");var S,M,b,T=l(a("kLXV")),I=n(a("q1tI")),D=a("MuoO"),x=a("7DNP"),B=l(a("9z5M")),R=l(a("FnG8")),V=l(a("pjgK")),L=l(a("XZXw")),N=l(a("Q7Re")),Q=(l(a("wd/R")),l(a("XH3O"))),q=l(a("MI6T")),A=l(a("kruT")),z=T.default.confirm,K=(E.default.Group,C.default.Item,w.default.Option),F=(k.default.TextArea,S=(0,D.connect)(function(e){return{itemBankManage:e.itemBankManage}}),M=C.default.create(),S(b=M(b=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,n=new Array(l),o=0;o<l;o++)n[o]=arguments[o];return a=(0,m.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(n))),a.state={formValues:{},pagination:{rows:10,page:1},addModalTitle:"",addModalType:"",addModalItem:"",addVisible:!1,selectedRows:[],resourceData:[],itemId:""},a.handleStandardTableChange=function(e){var t=a.props.dispatch,l=a.state.formValues,n=(0,f.default)({},l,{page:e.current,rows:e.pageSize});a.setState({pagination:{rows:e.pageSize,page:e.current}}),t({type:"itemBankManage/getSchoolCustomTestList",payload:n})},a.handleSearch=function(e){e.preventDefault();var t=a.props,l=t.dispatch,n=t.form,o=a.state.pagination;n.validateFields(["titleS","levelS"],function(e,t){var n=(0,f.default)({},t,o,{page:1});a.setState({formValues:n,pagination:(0,f.default)({},o,{page:1})}),l({type:"itemBankManage/getSchoolCustomTestList",payload:n})})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.addShow=function(e,t){var l=(0,v.default)((0,v.default)(a)),n="",o="";"edit"===e?(console.log(t),n="\u7f16\u8f91",o=t.id,a.props.dispatch({type:"itemBankManage/getSchoolCustomTestItem",payload:{id:t.id},callback:function(e){console.log(e),e&&e.length>0&&l.setState({resourceData:e})}})):n="\u65b0\u589e",a.setState({addVisible:!0,addModalTitle:n,addModalType:e,addModalItem:t,itemId:o})},a.addHide=function(){a.props.form.resetFields(),a.setState({addVisible:!1,addModalTitle:"",addModalType:"",addModalItem:"",itemId:"",resourceData:[{key:0,type:1,resourceId:null,questionBankId:null}]})},a.add=function(){var e=a.state.resourceData,t=a.props,l=t.dispatch,n=t.form,o=(t.itemBankManage.questionBankId,a.state),d=o.addModalItem,u=o.addModalType,i=o.pagination,r=o.formValues,s=(0,v.default)((0,v.default)(a));n.validateFields(function(t,a){if(!t){var n={};if(3==a.type){if(a.schoolQuestionBankId.length<=0)return void c.default.error({message:"\u8bf7\u9009\u62e9\u9898\u76ee"});for(var o=0;o<a.schoolQuestionBankId.length;o++)e.push({questionBankId:a.schoolQuestionBankId[o].value,type:3})}"edit"===u?(n=(0,f.default)({},a,{id:d.id,items:e}),delete n.titleS,delete n.levelS,l({type:"itemBankManage/uptSchoolCustomTestData",payload:{values:(0,f.default)({},n),searchVal:(0,f.default)({},r,i)},callback:function(){s.addHide()}})):(n=(0,f.default)({},a,{items:e}),delete n.titleS,delete n.levelS,l({type:"itemBankManage/addSchoolCustomTestData",payload:{values:(0,f.default)({},n),searchVal:(0,f.default)({},i,{page:1})},callback:function(){s.props.form.resetFields(),s.addHide()}}))}})},a.delInfo=function(e){(0,v.default)((0,v.default)(a));var t=a.props.dispatch,l=a.state,n=l.formValues,o=l.pagination;z({title:"",content:"\u662f\u5426\u786e\u8ba4\u5220\u9664\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t({type:"itemBankManage/delSchoolCustomTestData",payload:{ids:[e.id],searchVal:(0,f.default)({},n,o)}})},onCancel:function(){}})},a.handleMenuClick=function(e){var t=a.props.dispatch,l=a.state,n=l.formValues,o=l.selectedRows,d=l.pagination,u=(0,v.default)((0,v.default)(a));if(o&&!(o.length<=0))switch(e.key){case"del":z({title:"",content:"\u662f\u5426\u786e\u8ba4\u5220\u9664\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t({type:"itemBankManage/delSchoolCustomTestData",payload:{ids:o.map(function(e){return e.id}),searchVal:(0,f.default)({},n,d)},callback:function(){u.setState({selectedRows:[]})}})},onCancel:function(){this.setState({selectedRows:[]})}});break;default:break}},a.handleInfo=function(e){var t=(0,v.default)((0,v.default)(a)),l=a.props.dispatch,n=a.state,o=n.formValues,d=n.pagination;l({type:"itemBankManage/uptSchoolCustomTestData",payload:{values:(0,f.default)({},e,{multiMediaState:2==e.multiMediaState?1:2}),searchVal:(0,f.default)({},o,d)},callback:function(){t.setState({selectedRows:[]})}})},a.handleTabChange=function(e){var t=a.props.dispatch;switch(e){case"knowPointsManage":t(x.routerRedux.push("/itemBankManage/know-points-manage"));break;case"itemManage":t(x.routerRedux.push("/itemBankManage/item-manage"));break;case"customManage":t(x.routerRedux.push("/itemBankManage/custom-manage"));break;case"groupManage":t(x.routerRedux.push("/itemBankManage/group-manage"));break;default:break}},a.downloadQrcode=function(e){window.open("".concat(A.default.baseURL,"/schoolCustomTest/qrcode/").concat(e.id))},a.selectKnow=function(e){3!=e&&a.props.dispatch({type:"itemBankManage/getSchoolCustomGenerateData",payload:{type:e}})},a.changeUploadList=function(e,t){var l=a.state.resourceData&&a.state.resourceData.length>0?a.state.resourceData.slice(0):[];if("plus"===e){for(var n=0,o=0;o<l.length;o++)0===o?(n=l[o].key,l[o].sort):(l[o].sort>l[o-1].sort?l[o].sort:l[o-1].sort,n=l[o].key>l[o-1].key?l[o].key:l[o-1].key);l.push({key:n+1,type:1,resourceId:null,questionBankId:null})}else for(var d=0;d<l.length;d++)if(t===l[d].key){l.splice(d,1);break}a.setState({resourceData:l})},a.onSingleChange=function(e,t){for(var l=a.state.resourceData&&a.state.resourceData.length>0?a.state.resourceData.slice(0):[],n=0;n<l.length;n++)if(t===l[n].key){l[n].questionBankId=e;break}a.setState({resourceData:l})},a.onUploadChange=function(e,t){for(var l=a.state.resourceData&&a.state.resourceData.length>0?a.state.resourceData.slice(0):[],n=0;n<l.length;n++)if(t===l[n].key){l[n].type=e;break}a.setState({resourceData:l})},a}return(0,y.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t=this.state,a=t.pagination,l=t.formValues;e({type:"itemBankManage/getSchoolQuestionTopicAll"}),e({type:"itemBankManage/getSchoolQuestionBankAll"}),e({type:"itemBankManage/getSchoolCustomTestList",payload:(0,f.default)({},a,l)})}},{key:"renderForm",value:function(){var e=this,t=[I.default.createElement(K,{key:1,value:1},"\u7b80\u5355"),I.default.createElement(K,{key:2,value:2},"\u666e\u901a"),I.default.createElement(K,{key:3,value:3},"\u56f0\u96be")];return I.default.createElement(C.default,{onSubmit:this.handleSearch,layout:"inline"},I.default.createElement(R.default,{dispatch:this.props,dataInx:"titleS",con:"\u7ec4\u9898\u6807\u9898",innerCon:"\u8bf7\u8f93\u5165\u7ec4\u9898\u6807\u9898",maxLength:"15",size:{lg:12,xl:8,xxl:6}}),I.default.createElement(Q.default,{dispatch:this.props,size:{lg:12,xl:8,xxl:6},dataInx:"levelS",con:"\u96be\u6613\u5ea6",innerCon:"\u5168\u90e8",optObj:t}),I.default.createElement(V.default,{dispatch:this.props,con:"\u641c\u7d22",size:{lg:12,xl:8,xxl:1}}),I.default.createElement(i.default,{id:"mediaXl"},I.default.createElement(r.default,{type:"primary",style:{marginLeft:"10px"},onClick:function(){return e.addShow()}},I.default.createElement(s.default,{type:"plus-circle"}),"\u65b0\u589e")))}},{key:"render",value:function(){var e=this.props,t=e.itemBankManage,a=t.loading,l=t.schoolCustomTestData,n=t.schoolCustomTestItem,c=t.schoolQuestionBankDataAll,f=(t.schoolCustomTestQuestions,t.schoolQuestionTopicDataAll),p=(e.form.getFieldDecorator,this.state),h=p.addVisible,m=p.addModalTitle,g=(p.addModalType,p.itemId),y=(p.itemDetails,p.resourceData),v=I.default.createElement(u.default,{onClick:this.handleMenuClick,selectedKeys:[]},I.default.createElement(u.default.Item,{key:"del"},"\u6279\u91cf\u5220\u9664")),k=[{key:"knowPointsManage",tab:"\u77e5\u8bc6\u70b9\u7ba1\u7406"},{key:"itemManage",tab:"\u9898\u5e93\u7ba1\u7406"},{key:"customManage",tab:"\u81ea\u5b9a\u4e49\u7ec4\u9898"},{key:"groupManage",tab:"\u7ec4\u9898\u89c4\u5219"}];return I.default.createElement(L.default,{tabList:k,activeIndex:2,onTabChange:this.handleTabChange},I.default.createElement(o.default,{bordered:!1},I.default.createElement("div",{className:N.default.classManageList},I.default.createElement("div",{className:N.default.classManageListForm},this.renderForm(),I.default.createElement(i.default,{lg:12,xl:8,xxl:6,className:N.default.pointerSpan},I.default.createElement("span",{className:N.default.tableListOperator},I.default.createElement("span",null,I.default.createElement(d.default,{overlay:v},I.default.createElement(r.default,{style:{width:"150px"}},"\u6279\u91cf\u64cd\u4f5c ",I.default.createElement(s.default,{type:"down"}))))))),I.default.createElement(B.default,{loading:a,data:l,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,dispatch:this.props.dispatch,uptInfo:this.addShow,delInfo:this.delInfo,handleInfo:this.handleInfo,downloadQrcode:this.downloadQrcode}))),h?I.default.createElement(q.default,{dispatch:this.props,addVisible:h,addShow:this.addShow,addHide:this.addHide,add:this.add,itemId:g,addModalTitle:m,itemDetails:n,items:y,selectKnow:this.selectKnow,schoolQuestionBankDataAll:c,changeUploadList:this.changeUploadList,onUploadChange:this.onUploadChange,onSingleChange:this.onSingleChange,schoolQuestionTopicDataAll:f}):"")}}]),t}(I.Component))||b)||b);t.default=F}}]);