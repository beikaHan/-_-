(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"41X9":function(e,a,t){"use strict";var l=t("TqRt"),d=t("284h");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("DZo9");var n=l(t("8z0m")),i=l(t("pVnL"));t("IzEo");var o=l(t("bx4M"));t("jCWc");var r=l(t("kPKH"));t("+L6B");var s=l(t("2/Rp"));t("Pwec");var u=l(t("CtXQ")),c=l(t("MVZn")),f=l(t("lwsE")),p=l(t("W8MJ")),m=l(t("a1gu")),g=l(t("Nsbk")),h=l(t("7W2i")),v=l(t("PJYZ"));t("miYZ");var E=l(t("tsqr"));t("5NDa");var w=l(t("5rEg"));t("OaEy");var y=l(t("2fM7"));t("y8nQ");var b=l(t("Vl3Y"));t("7Kak");var S=l(t("9yH6"));t("2qtc");var I,M,L,V=l(t("kLXV")),x=d(t("q1tI")),k=t("MuoO"),R=(t("7DNP"),l(t("D1Df")),l(t("lUk+"))),U=l(t("FnG8")),T=l(t("pjgK")),C=(l(t("UPwx")),l(t("XZXw"))),D=l(t("55c4")),F=(l(t("wd/R")),t("7Qib")),O=l(t("kruT")),q=V.default.confirm,B=S.default.Group,N=b.default.Item;y.default.Option,w.default.TextArea;function j(e,a){var t=new FileReader;t.addEventListener("load",function(){return a(t.result)}),t.readAsDataURL(e)}function z(e){var a="image/jpeg"===e.type||"image/png"===e.type;a||E.default.error("\u4ec5\u652f\u6301jpg\u6216png\u683c\u5f0f");var t=e.size/1024/1024<2;return t||E.default.error("\u56fe\u7247\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc72MB!"),a&&t}var H=(I=(0,k.connect)(function(e){return{manage:e.manage}}),M=b.default.create(),I(L=M(L=function(e){function a(){var e,t;(0,f.default)(this,a);for(var l=arguments.length,d=new Array(l),n=0;n<l;n++)d[n]=arguments[n];return t=(0,m.default)(this,(e=(0,g.default)(a)).call.apply(e,[this].concat(d))),t.state={formValues:{},pagination:{rows:10,page:1},addModalTitle:"",addModalType:"",addModalItem:"",addVisible:!1,selectedRows:[],loading:!1,imageUrl:"",previewImageResourceId:""},t.handleStandardTableChange=function(e){var a=t.props.dispatch,l=t.state.formValues,d=(0,c.default)({},l,{page:e.current,rows:e.pageSize});t.setState({pagination:{rows:e.pageSize,page:e.current}}),a({type:"manage/getSchoolList",payload:d})},t.handleSearch=function(e){e.preventDefault();var a=t.props,l=a.dispatch,d=a.form,n=t.state.pagination;d.validateFields(["titleS"],function(e,a){var d=(0,c.default)({},a,n,{page:1});t.setState({formValues:d,pagination:(0,c.default)({},n,{page:1})}),l({type:"manage/getSchoolList",payload:d})})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.addShow=function(e,a){var l="";"edit"===e?(console.log(a),l="\u7f16\u8f91",t.props.dispatch({type:"manage/getSchoolItem",payload:{id:a.id}})):l="\u65b0\u589e",t.setState({addVisible:!0,addModalTitle:l,addModalType:e,addModalItem:a})},t.addHide=function(){t.props.form.resetFields(),t.setState({addVisible:!1,addModalTitle:"",addModalType:"",addModalItem:"",imageUrl:""})},t.add=function(e,a){var l=t.props,d=l.dispatch,n=l.form,i=t.state,o=i.addModalItem,r=i.addModalType,s=i.pagination,u=i.formValues,f=i.previewImageResourceId,p=(0,v.default)((0,v.default)(t));n.validateFields(function(e,a){if(!e){var t={};"edit"===r?(t=(0,c.default)({},a,{id:o.id,adminUserId:o.adminUserId,previewImageResourceId:f}),delete t.titleS,d({type:"manage/uptSchoolData",payload:{values:(0,c.default)({},t),searchVal:(0,c.default)({},u,s)},callback:function(){p.addHide()}})):(t=(0,c.default)({},a,{previewImageResourceId:f}),delete t.titleS,d({type:"manage/addSchoolData",payload:{values:(0,c.default)({},t),searchVal:(0,c.default)({},s,{page:1})},callback:function(){p.addHide()}}))}})},t.delInfo=function(e){var a=(0,v.default)((0,v.default)(t)),l=t.props.dispatch,d=t.state,n=d.formValues,i=d.selectedRows,o=d.pagination;console.log(i),q({title:"",content:"\u662f\u5426\u786e\u8ba4\u5220\u9664\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){l({type:"manage/delSchoolData",payload:{ids:e?[e.id]:i.map(function(e){return e.id}),searchVal:(0,c.default)({},n,o)},callback:function(){a.setState({selectedRows:[]})}})},onCancel:function(){a.setState({selectedRows:[]})}})},t.handleInfo=function(e){var a=(0,v.default)((0,v.default)(t)),l=t.props.dispatch,d=t.state,n=d.formValues,i=d.pagination;l({type:"manage/uptSchoolData",payload:{values:(0,c.default)({},e,{status:2==e.status?1:2}),searchVal:(0,c.default)({},n,i)},callback:function(){a.setState({selectedRows:[]})}})},t.handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&(console.log(e.file.response),j(e.file.originFileObj,function(a){return t.setState({imageUrl:a,loading:!1,previewImageResourceId:e.file.response.resource.id})})):t.setState({loading:!0})},t.downloadQrcode=function(e){window.open("".concat(O.default.baseURL,"/schoolBase/qrcode/").concat(e.id))},t}return(0,h.default)(a,e),(0,p.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,a=this.state,t=a.pagination,l=a.formValues;e({type:"manage/getSchoolList",payload:(0,c.default)({},t,l)})}},{key:"renderForm",value:function(){var e=this;return x.default.createElement(b.default,{onSubmit:this.handleSearch,layout:"inline"},x.default.createElement(U.default,{dispatch:this.props,dataInx:"titleS",con:"\u5b66\u6821\u540d\u79f0",innerCon:"\u8bf7\u8f93\u5165\u5b66\u6821\u540d\u79f0",maxLength:"15",size:{lg:12,xl:8,xxl:6}}),x.default.createElement(T.default,{dispatch:this.props,con:"\u641c\u7d22",size:{lg:12,xl:8,xxl:1}}),x.default.createElement(r.default,{id:"mediaXl"},x.default.createElement(s.default,{type:"primary",style:{marginLeft:"10px"},onClick:function(){return e.addShow(null,null)}},x.default.createElement(u.default,{type:"plus-circle"}),"\u65b0\u589e"),x.default.createElement(s.default,{type:"primary",style:{marginLeft:"10px"},onClick:function(){return e.delInfo()}},x.default.createElement(u.default,{type:"plus-circle"}),"\u6279\u91cf\u5220\u9664")))}},{key:"render",value:function(){var e=this,a=this.props,t=a.manage,l=t.loading,d=t.manageData,r=t.schoolItem,s=a.form.getFieldDecorator,c=this.state,f=c.addVisible,p=c.addModalTitle,m=c.addModalType,g=c.imageUrl,h={labelcol:{span:6},wrappercol:{xs:{span:28,offset:0},sm:{span:10,offset:0}}};return x.default.createElement(C.default,{title:"\u5b66\u6821\u7ba1\u7406"},x.default.createElement(o.default,{bordered:!1},x.default.createElement("div",{className:D.default.classManageList},x.default.createElement("div",{className:D.default.classManageListForm},this.renderForm()),x.default.createElement(R.default,{loading:l,data:d,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,dispatch:this.props.dispatch,uptInfo:this.addShow,delInfo:this.delInfo,handleInfo:this.handleInfo,downloadQrcode:this.downloadQrcode}))),x.default.createElement(V.default,{title:p,visible:f,onOk:this.add,onCancel:function(){return e.addHide()},className:D.default.addModal},x.default.createElement(b.default,{layout:"inline"},x.default.createElement(N,(0,i.default)({label:"\u540d\u79f0"},h),s("title",{initialValue:"edit"===m&&r?r.title:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}]})(x.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",maxLength:100}))),x.default.createElement(N,(0,i.default)({label:"\u7f51\u5740"},h),s("websiteUrl",{initialValue:"edit"===m&&r?r.websiteUrl:""})(x.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165\u7f51\u5740",maxLength:100}))),x.default.createElement(N,(0,i.default)({label:"\u8054\u7cfb\u65b9\u5f0f"},h),s("contact",{initialValue:"edit"===m&&r?r.contact:""})(x.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u65b9\u5f0f",maxLength:100}))),x.default.createElement(N,(0,i.default)({label:"\u7b80\u4ecb"},h),s("content",{initialValue:"edit"===m&&r?r.content:""})(x.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165\u7b80\u4ecb",maxLength:100}))),x.default.createElement(N,(0,i.default)({label:"\u5730\u5740"},h),s("address",{initialValue:"edit"===m&&r?r.address:""})(x.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165\u5730\u5740",maxLength:100}))),x.default.createElement(N,(0,i.default)({label:"\u8d26\u53f7"},h),s("username",{initialValue:"edit"===m&&r?r.username:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7"}]})(x.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7",maxLength:100}))),x.default.createElement(N,(0,i.default)({label:"\u5bc6\u7801"},h),s("password",{initialValue:"edit"===m&&r?r.password:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]})(x.default.createElement(w.default,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",maxLength:100}))),x.default.createElement(N,(0,i.default)({label:"\u72b6\u6001"},h),s("status",{initialValue:"edit"===m&&r?r.status:1})(x.default.createElement(B,null,x.default.createElement(S.default,{value:1},"\u542f\u7528"),x.default.createElement(S.default,{value:2},"\u7981\u7528")))),x.default.createElement(N,(0,i.default)({label:"\u5b66\u6821\u56fe\u7247"},h),s("previewImageUrl",{initialValue:"edit"===m&&r&&r.previewImageUrl?r.previewImageUrl:""})(x.default.createElement(n.default,{name:"file",listType:"picture-card",showUploadList:!1,headers:{JSESSIONID:(0,F.getCookie)()?(0,F.getCookie)():null},action:"".concat(O.default.baseURL,"/resource/upload"),beforeUpload:z,onChange:this.handleChange},g?x.default.createElement("img",{src:g,alt:"avatar"}):"edit"===m&&r&&r.previewImageUrl?x.default.createElement("img",{src:r.previewImageUrl,alt:"avatar"}):x.default.createElement("div",null,x.default.createElement(u.default,{type:this.state.loading?"loading":"plus"}),x.default.createElement("div",{className:"ant-upload-text"},"Upload"))))),x.default.createElement(N,(0,i.default)({label:"\u56fe\u7247\u8981\u6c42"},h),x.default.createElement("div",null,"\u4ec5\u652f\u6301jpg\u6216png\u683c\u5f0f\uff0c\u4e14\u5927\u5c0f\u4e0d\u8d85\u8fc72MB")))))}}]),a}(x.Component))||L)||L);a.default=H},"55c4":function(e,a,t){e.exports={classManageList:"antd-pro\\pages\\-manage\\-manage-classManageList",tableListOperator:"antd-pro\\pages\\-manage\\-manage-tableListOperator",mockBtn:"antd-pro\\pages\\-manage\\-manage-mockBtn",classManageListForm:"antd-pro\\pages\\-manage\\-manage-classManageListForm",submitButtons:"antd-pro\\pages\\-manage\\-manage-submitButtons",tableListForm:"antd-pro\\pages\\-manage\\-manage-tableListForm",classManageEdit:"antd-pro\\pages\\-manage\\-manage-classManageEdit",addModal:"antd-pro\\pages\\-manage\\-manage-addModal"}}}]);