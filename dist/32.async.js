(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{iOAW:function(e,t,a){"use strict";var s=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("/xke");var n=s(a("TeRw")),r=s(a("MVZn")),l=s(a("o0o1")),i=(s(a("wd/R")),a("b/c7")),c=a("0hcr"),o=a("GBM+"),u={namespace:"taskManage",state:{loading:!1,schoolMissionItem:{},schoolMissionData:{list:[],pagination:{}},items:[],recourseList:[],titleAll:[]},subscriptions:{setup:function(e){e.dispatch,e.history}},effects:{getRecourseList:l.default.mark(function e(t,a){var s,n,r,u,d,p,f,h;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.payload,n=t.callback,r=a.call,a.select,u=a.put,d={type:s&&s.type?s.type:1},f=[],!s||8!=s.type){e.next=16;break}return e.next=7,r(c.getSchoolMissionAll,{});case 7:if(p=e.sent,(0,i.validResult)(p)){e.next=10;break}return e.abrupt("return");case 10:for(h=0;h<p.data.list.length;h++)1==p.data.list[h].targetType&&f.push(p.data.list[h]);return e.next=13,u({type:"saveCP",payload:{recourseList:f}});case 13:n&&n(f),e.next=24;break;case 16:return e.next=18,r(o.getRecourseList,d);case 18:if(p=e.sent,(0,i.validResult)(p)){e.next=21;break}return e.abrupt("return");case 21:return e.next=23,u({type:"saveCP",payload:{recourseList:p.data.items}});case 23:n&&n(p.data.items);case 24:case"end":return e.stop()}},e,this)}),getTitleAll:l.default.mark(function e(t,a){var s,n,r,o;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.payload,t.callback,s=a.call,a.select,n=a.put,r={},e.next=5,s(c.getTitleAll,r);case 5:if(o=e.sent,(0,i.validResult)(o)){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,n({type:"saveCP",payload:{titleAll:o.data.list}});case 10:case"end":return e.stop()}},e,this)}),getSchoolMissionList:l.default.mark(function e(t,a){var s,n,r,o,u,d,p;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.payload,t.callback,n=a.call,a.select,r=a.put,o={rows:s&&s.rows?s.rows:10,page:s&&s.page?s.page:1,title:s&&s.titleS?s.titleS:"",level:s&&s.levelS?s.levelS:""},e.next=5,n(c.getSchoolMission,o);case 5:if(u=e.sent,(0,i.validResult)(u)){e.next=8;break}return e.abrupt("return");case 8:return d={},p={},p.current=u.data.current?parseInt(u.data.current):1,p.pageSize=u.data.size?parseInt(u.data.size):10,p.total=parseInt(u.data.total),d.pagination=p,d.list=u.data.list,e.next=17,r({type:"saveSchoolMissionData",payload:d});case 17:case"end":return e.stop()}},e,this)}),addSchoolMissionData:l.default.mark(function e(t,a){var s,o,u,d,p,f;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.payload,o=t.callback,u=a.call,a.select,d=a.put,p=(0,r.default)({},s.values),console.log(p),e.next=6,u(c.addSchoolMissionData,p);case 6:if(f=e.sent,(0,i.validResult)(f)){e.next=9;break}return e.abrupt("return");case 9:return n.default.success({message:"\u64cd\u4f5c\u6210\u529f"}),e.next=12,d({type:"getSchoolMissionList",payload:(0,r.default)({},s.searchVal)});case 12:o&&o();case 13:case"end":return e.stop()}},e,this)}),getSchoolMissionItem:l.default.mark(function e(t,a){var s,n,r,o,u,d,p;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.payload,n=t.callback,r=a.call,a.select,o=a.put,u={id:s.id},e.next=5,r(c.getSchoolMissionItem,u);case 5:if(d=e.sent,(0,i.validResult)(d)){e.next=8;break}return e.abrupt("return");case 8:for(p=0;p<d.data.items.length;p++)d.data.items[p].key=p;return e.next=11,o({type:"saveCP",payload:{schoolMissionItem:d.data.schoolMission,items:d.data.items}});case 11:n&&n(d.data.items);case 12:case"end":return e.stop()}},e,this)}),uptSchoolMissionData:l.default.mark(function e(t,a){var s,o,u,d,p,f;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.payload,o=t.callback,u=a.call,a.select,d=a.put,p=(0,r.default)({},s.values),e.next=5,u(c.uptSchoolMissionItem,p);case 5:if(f=e.sent,(0,i.validResult)(f)){e.next=8;break}return e.abrupt("return");case 8:return n.default.success({message:"\u64cd\u4f5c\u6210\u529f"}),e.next=11,d({type:"getSchoolMissionList",payload:(0,r.default)({},s.searchVal)});case 11:o&&o();case 12:case"end":return e.stop()}},e,this)}),delSchoolMissionData:l.default.mark(function e(t,a){var s,o,u,d,p,f;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.payload,o=t.callback,u=a.call,a.select,d=a.put,console.log(s),p={ids:s&&s.ids?s.ids:[]},e.next=6,u(c.delSchoolMission,p);case 6:if(f=e.sent,(0,i.validResult)(f)){e.next=9;break}return e.abrupt("return");case 9:return n.default.success({message:"\u64cd\u4f5c\u6210\u529f"}),e.next=12,d({type:"getSchoolMissionList",payload:(0,r.default)({},s.searchVal)});case 12:o&&o();case 13:case"end":return e.stop()}},e,this)})},reducers:{changeLoading:function(e,t){return(0,r.default)({},e,{loading:t.payload})},saveCP:function(e,t){return(0,r.default)({},e,t.payload)},saveSchoolMissionData:function(e,t){return(0,r.default)({},e,{schoolMissionData:t.payload})}}};t.default=u}}]);