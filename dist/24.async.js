(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{KAoZ:function(e,a,t){"use strict";var l=t("TqRt"),n=t("284h");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("DZo9");var d=l(t("8z0m")),i=l(t("pVnL"));t("IzEo");var r=l(t("bx4M"));t("qVdP");var o=l(t("jsC+"));t("lUTK");var u=l(t("BvKs"));t("jCWc");var s=l(t("kPKH"));t("+L6B");var c=l(t("2/Rp"));t("Pwec");var f=l(t("CtXQ")),p=l(t("RIqP"));t("/xke");var h=l(t("TeRw")),g=l(t("MVZn")),m=l(t("lwsE")),v=l(t("W8MJ")),y=l(t("a1gu")),I=l(t("Nsbk")),b=l(t("7W2i")),M=l(t("PJYZ"));t("miYZ");var E=l(t("tsqr"));t("5NDa");var S=l(t("5rEg"));t("OaEy");var k=l(t("2fM7"));t("y8nQ");var w=l(t("Vl3Y"));t("7Kak");var R=l(t("9yH6"));t("2qtc");var C,x,T,L=l(t("kLXV")),V=n(t("q1tI")),U=t("MuoO"),O=t("7DNP"),D=l(t("uzvw")),N=l(t("FnG8")),z=l(t("pjgK")),K=(l(t("UPwx")),l(t("XZXw"))),P=t("7Qib"),F=l(t("kruT")),j=l(t("YdW7")),q=(l(t("wd/R")),l(t("XH3O"))),A=L.default.confirm,J=R.default.Group,H=w.default.Item,W=k.default.Option;S.default.TextArea;function Z(e,a){var t=new FileReader;t.addEventListener("load",function(){return a(t.result)}),t.readAsDataURL(e)}function X(e){var a="image/jpeg"===e.type||"image/png"===e.type;a||E.default.error("\u4ec5\u652f\u6301jpg\u6216png\u683c\u5f0f");var t=e.size/1024/1024<2;return t||E.default.error("\u56fe\u7247\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc72MB!"),a&&t}function B(e){}var Y=(C=(0,U.connect)(function(e){return{teachingManage:e.teachingManage}}),x=w.default.create(),C(T=x(T=function(e){function a(){var e,t;(0,m.default)(this,a);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return t=(0,y.default)(this,(e=(0,I.default)(a)).call.apply(e,[this].concat(n))),t.state={formValues:{},pagination:{rows:10,page:1},addModalTitle:"",addModalType:"",addModalItem:"",addVisible:!1,selectedRows:[],loading:!1,uploading:!1,fileList:[],thumbnailResourceId:"",resourceId:""},t.handleStandardTableChange=function(e){var a=t.props.dispatch,l=t.state.formValues,n=(0,g.default)({},l,{page:e.current,rows:e.pageSize,type:1});t.setState({pagination:{rows:e.pageSize,page:e.current}}),a({type:"teachingManage/getSchoolMaterialList",payload:n})},t.handleSearch=function(e){e.preventDefault();var a=t.props,l=a.dispatch,n=a.form,d=t.state.pagination;n.validateFields(["titleS","classifyIdS"],function(e,a){var n=(0,g.default)({},a,d,{page:1,type:1});t.setState({formValues:n,pagination:(0,g.default)({},d,{page:1})}),l({type:"teachingManage/getSchoolMaterialList",payload:n})})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.addShow=function(e,a){var l="";"edit"===e?(l="\u7f16\u8f91",t.props.dispatch({type:"teachingManage/getSchoolMaterialItem",payload:{id:a.id,type:1},callback:function(e){var a=[{uid:e.resourceId,name:e.thumbnailUrl.substring(e.thumbnailUrl.lastIndexOf("/")+1),status:"done"}];t.setState({fileList:a.concat()})}})):(l="\u65b0\u589e",t.setState({fileList:[]})),t.setState({addVisible:!0,addModalTitle:l,addModalType:e,addModalItem:a,uploading:!1})},t.addHide=function(){t.props.form.resetFields(),t.setState({addVisible:!1,addModalTitle:"",addModalType:"",addModalItem:"",thumbnailResourceId:"",resourceId:"",imageUrl:"",fileList:[]}),t.props.dispatch({type:"teachingManage/saveCP",payload:{videoItem:{}}})},t.add=function(){var e=t.props,a=e.dispatch,l=e.form,n=t.state,d=n.addModalItem,i=n.addModalType,r=n.pagination,o=n.formValues,u=n.thumbnailResourceId,s=n.resourceId,c=(0,M.default)((0,M.default)(t));l.validateFields(function(e,t){if(!e){var l={};if("edit"===i){if((void 0==s||""==s)&&(void 0==d.resourceId||""==d.resourceId))return void h.default.error({message:"\u8bf7\u4e0a\u4f20\u89c6\u9891"});if((void 0==u||""==u)&&(void 0==d.thumbnailResourceId||""==d.thumbnailResourceId))return void h.default.error({message:"\u8bf7\u4e0a\u4f20\u7f29\u7565\u56fe"});l=(0,g.default)({},t,{id:d.id,adminUserId:d.adminUserId,thumbnailResourceId:u&&""!=u?u:d.thumbnailResourceId,resourceId:s&&""!=s?s:d.resourceId,type:1}),delete l.titleS,delete l.classifyIdS,delete l.previewImageUrl,a({type:"teachingManage/uptSchoolMaterialData",payload:{values:(0,g.default)({},l),searchVal:(0,g.default)({},o,r,{type:1})},callback:function(){c.addHide()}})}else{if(void 0==s||""==s)return void h.default.error({message:"\u8bf7\u4e0a\u4f20\u89c6\u9891"});if(void 0==u||""==u)return void h.default.error({message:"\u8bf7\u4e0a\u4f20\u7f29\u7565\u56fe"});l=(0,g.default)({},t,{thumbnailResourceId:u&&""!=u?u:t.thumbnailResourceId,resourceId:s&&""!=s?s:t.resourceId,type:1}),delete l.titleS,delete l.classifyIdS,delete l.previewImageUrl,a({type:"teachingManage/addSchoolMaterialData",payload:{values:(0,g.default)({},l),searchVal:(0,g.default)({},r,{page:1,type:1})},callback:function(){c.addHide()}})}}})},t.delInfo=function(e){(0,M.default)((0,M.default)(t));var a=t.props.dispatch,l=t.state,n=l.formValues,d=l.pagination;A({title:"",content:"\u662f\u5426\u786e\u8ba4\u5220\u9664\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a({type:"teachingManage/delSchoolMaterialData",payload:{ids:[e.id],searchVal:(0,g.default)({},n,d,{type:1})}})},onCancel:function(){}})},t.handleMenuClick=function(e){var a=t.props.dispatch,l=t.state,n=l.formValues,d=l.selectedRows,i=l.pagination,r=(0,M.default)((0,M.default)(t));if(d&&!(d.length<=0))switch(e.key){case"del":A({title:"",content:"\u662f\u5426\u786e\u8ba4\u5220\u9664\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a({type:"teachingManage/delSchoolMaterialData",payload:{ids:d.map(function(e){return e.id}),searchVal:(0,g.default)({},n,i,{type:1})},callback:function(){r.setState({selectedRows:[]})}})},onCancel:function(){this.setState({selectedRows:[]})}});break;default:break}},t.handleRemove=function(){var e=t.state.addModalItem;e&&(e.resourceId="",t.setState({addModalItem:e})),t.setState({uploading:!1,resourceId:""})},t.handleChange=function(e){e.fileList.length>1&&e.fileList.splice(0,e.fileList.length-1),t.setState({fileList:(0,p.default)(e.fileList)}),t.state.uploading||t.setState({uploading:!0}),"uploading"!==e.file.status&&"done"===e.file.status&&t.setState({uploading:!1,resourceId:e.file.response.resource.id})},t.handleChangeImg=function(e){"uploading"!==e.file.status?"done"===e.file.status&&(console.log(e.file.response),Z(e.file.originFileObj,function(a){return t.setState({imageUrl:a,loading:!1,thumbnailResourceId:e.file.response.resource.id})})):t.setState({loading:!0})},t.handleTabChange=function(e){var a=t.props.dispatch;switch(e){case"classifiedManage":a(O.routerRedux.push("/teachingManage/classified-manage"));break;case"videoManage":a(O.routerRedux.push("/teachingManage/video-manage"));break;case"picManage":a(O.routerRedux.push("/teachingManage/pic-manage"));break;case"audioManage":a(O.routerRedux.push("/teachingManage/audio-manage"));break;case"documentManage":a(O.routerRedux.push("/teachingManage/document-manage"));break;default:break}},t}return(0,b.default)(a,e),(0,v.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,a=this.state,t=a.pagination,l=a.formValues;e({type:"teachingManage/getClassifyAll"}),e({type:"teachingManage/getSchoolMaterialList",payload:(0,g.default)({},t,l,{type:1})})}},{key:"renderForm",value:function(){var e=this,a=this.props.teachingManage.classifyAllData,t=[];return a&&a.map(function(e){t.push(V.default.createElement(W,{value:e.id,key:e.id},e.title))}),V.default.createElement(w.default,{onSubmit:this.handleSearch,layout:"inline"},V.default.createElement(N.default,{dispatch:this.props,dataInx:"titleS",con:"\u6807\u9898",innerCon:"\u8bf7\u8f93\u5165\u6807\u9898",maxLength:"15",size:{lg:12,xl:8,xxl:6}}),V.default.createElement(q.default,{dispatch:this.props,size:{lg:12,xl:8,xxl:6},dataInx:"classifyIdS",con:"\u5206\u7c7b\u641c\u7d22",innerCon:"\u5168\u90e8",optObj:t}),V.default.createElement(z.default,{dispatch:this.props,con:"\u641c\u7d22",size:{lg:12,xl:8,xxl:1}}),V.default.createElement(s.default,{id:"mediaXl"},V.default.createElement(c.default,{type:"primary",style:{marginLeft:"10px"},onClick:function(){return e.addShow()}},V.default.createElement(f.default,{type:"plus-circle"}),"\u65b0\u589e")))}},{key:"render",value:function(){var e=this,a=this.props,t=a.teachingManage,l=t.loading,n=t.videoData,p=t.videoItem,h=t.classifyAllData,g=a.form.getFieldDecorator,m=this.state,v=m.addVisible,y=m.addModalTitle,I=m.addModalType,b=m.imageUrl,M=m.fileList,E=m.resourceId,C={labelcol:{span:6},wrappercol:{xs:{span:28,offset:0},sm:{span:10,offset:0}}},x=V.default.createElement(u.default,{onClick:this.handleMenuClick,selectedKeys:[]},V.default.createElement(u.default.Item,{key:"del"},"\u6279\u91cf\u5220\u9664")),T=[];h&&h.map(function(e){T.push(V.default.createElement(W,{value:e.id,key:e.id},e.title))});var U=[{key:"classifiedManage",tab:"\u5206\u7c7b\u7ba1\u7406"},{key:"videoManage",tab:"\u89c6\u9891\u7ba1\u7406"},{key:"picManage",tab:"\u56fe\u7247\u7ba1\u7406"},{key:"audioManage",tab:"\u97f3\u9891\u7ba1\u7406"},{key:"documentManage",tab:"\u6587\u6863\u7ba1\u7406"}];return V.default.createElement(K.default,{tabList:U,activeIndex:1,onTabChange:this.handleTabChange},V.default.createElement(r.default,{bordered:!1},V.default.createElement("div",{className:j.default.classManageList},V.default.createElement("div",{className:j.default.classManageListForm},this.renderForm(),V.default.createElement(s.default,{lg:12,xl:8,xxl:6,className:j.default.pointerSpan},V.default.createElement("span",{className:j.default.tableListOperator},V.default.createElement("span",null,V.default.createElement(o.default,{overlay:x},V.default.createElement(c.default,{style:{width:"150px"}},"\u6279\u91cf\u64cd\u4f5c ",V.default.createElement(f.default,{type:"down"}))))))),V.default.createElement(D.default,{loading:l,data:n,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,dispatch:this.props.dispatch,uptInfo:this.addShow,delInfo:this.delInfo,handleInfo:this.handleInfo}))),V.default.createElement(L.default,{title:y,visible:v,onOk:this.add,onCancel:function(){return e.addHide()},className:j.default.addModal},V.default.createElement(w.default,{layout:"inline"},V.default.createElement(H,(0,i.default)({label:"\u89c6\u9891\u6807\u9898"},C),g("title",{initialValue:"edit"===I&&p?p.title:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u89c6\u9891\u6807\u9898"}]})(V.default.createElement(S.default,{placeholder:"\u8bf7\u8f93\u5165\u89c6\u9891\u6807\u9898",maxLength:100}))),V.default.createElement(H,(0,i.default)({label:"\u7b80\u4ecb"},C),g("content",{initialValue:"edit"===I&&p?p.content:""})(V.default.createElement(S.default,{placeholder:"\u8bf7\u8f93\u5165\u7b80\u4ecb",maxLength:100}))),V.default.createElement(H,(0,i.default)({label:"\u72b6\u6001"},C),g("status",{initialValue:"edit"===I&&p?p.status:1})(V.default.createElement(J,null,V.default.createElement(R.default,{value:1},"\u542f\u7528"),V.default.createElement(R.default,{value:2},"\u7981\u7528")))),V.default.createElement(H,(0,i.default)({label:"\u5206\u7c7b"},C),g("classifyId",{initialValue:"edit"===I&&p&&p.classifyId?p.classifyId:h&&h[0]?h[0].id:""})(V.default.createElement(k.default,{placeholder:"\u8bf7\u9009\u62e9\u5206\u7c7b"},T))),V.default.createElement(H,(0,i.default)({label:"\u89c6\u9891\u4e0a\u4f20"},C),g("resourceId",{initialValue:"edit"===I&&p&&p.resourceId?p.resourceId:"",rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u89c6\u9891"}]})(V.default.createElement(d.default,{name:"file",showUploadList:!0,onRemove:this.handleRemove,fileList:M,listType:"text",headers:{JSESSIONID:(0,P.getCookie)()?(0,P.getCookie)():null},action:"".concat(F.default.baseURL,"/resource/upload"),beforeUpload:B,onChange:this.handleChange},V.default.createElement(c.default,null,V.default.createElement(f.default,{type:"upload"})," ",E?"\u5df2\u6709\u8d44\u6e90":"edit"===I&&p.resourceUrl?"\u5df2\u6709\u8d44\u6e90":"Upload")))),V.default.createElement(H,(0,i.default)({label:"\u89c6\u9891\u8981\u6c42"},C),V.default.createElement("div",null,"\u4e0d\u5f97\u8d85\u8fc7200MB")),V.default.createElement(H,(0,i.default)({label:"\u7f29\u7565\u56fe"},C),g("thumbnailResourceId",{initialValue:"edit"===I&&p&&p.thumbnailResourceId?p.thumbnailResourceId:"",rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u7f29\u7565\u56fe"}]})(V.default.createElement(d.default,{name:"file",listType:"picture-card",showUploadList:!1,headers:{JSESSIONID:(0,P.getCookie)()?(0,P.getCookie)():null},action:"".concat(F.default.baseURL,"/resource/upload"),beforeUpload:X,onChange:this.handleChangeImg},b?V.default.createElement("img",{src:b,alt:"avatar"}):"edit"===I&&p&&p.thumbnailUrl?V.default.createElement("img",{src:p.thumbnailUrl,alt:"avatar"}):V.default.createElement("div",null,V.default.createElement(f.default,{type:this.state.loading?"loading":"plus"}),V.default.createElement("div",{className:"ant-upload-text"},"Upload"))))),V.default.createElement(H,(0,i.default)({label:"\u56fe\u7247\u8981\u6c42"},C),V.default.createElement("div",null,"\u56fe\u7247\u4ec5\u652f\u6301jpg\u6216png\u683c\u5f0f\uff0c\u4e14\u5927\u5c0f\u4e0d\u8d85\u8fc72MB\uff0c\u6bd4\u4f8b\u4e3a16:9")))))}}]),a}(V.Component))||T)||T);a.default=Y},uzvw:function(e,a,t){"use strict";var l=t("284h"),n=t("TqRt");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("g9YV");var d=n(t("wCAj")),i=n(t("MVZn"));t("/zsF");var r=n(t("PArb")),o=n(t("lwsE")),u=n(t("W8MJ")),s=n(t("a1gu")),c=n(t("Nsbk")),f=n(t("7W2i"));t("OaEy");var p=n(t("2fM7")),h=l(t("q1tI")),g=(n(t("wd/R")),n(t("2gt5"))),m=(p.default.Option,function(e){function a(){var e,t;(0,o.default)(this,a);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return t=(0,s.default)(this,(e=(0,c.default)(a)).call.apply(e,[this].concat(n))),t.state={selectedRowKeys:[]},t.handleRowSelectChange=function(e,a){var l=a.reduce(function(e,a){return(e||0)+parseFloat(a.callNo||0,10)},0);t.props.onSelectRow&&t.props.onSelectRow(a),t.setState({selectedRowKeys:e,totalCallNo:l})},t.cleanSelectedKeys=function(){t.handleRowSelectChange([],[])},t.handleTableChange=function(e,a,l){t.props.onChange(e,a,l)},t.handleInfo=function(e){t.props.handleInfo(e)},t.delInfo=function(e){t.props.delInfo(e)},t.uptInfo=function(e,a){t.props.uptInfo(e,a)},t}return(0,f.default)(a,e),(0,u.default)(a,[{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this,a=this.props,t=a.data,l=t.list,n=t.pagination,o=a.loading,u=this.state.selectedRowKeys,s=[{title:"\u89c6\u9891",dataIndex:"thumbnailUrl",key:"thumbnailUrl",render:function(e,a){return h.default.createElement("a",{href:a.resourceUrl,target:"_blank"},h.default.createElement("img",{src:e,height:"50",weight:"50",alt:""}))}},{title:"\u6807\u9898",dataIndex:"title",key:"title"},{title:"\u63cf\u8ff0",dataIndex:"content",key:"content"},{title:"\u5206\u7c7b",dataIndex:"classifyTitle",key:"classifyTitle"},{title:"\u64cd\u4f5c",key:"operate",align:"center",render:function(a,t){return h.default.createElement("div",{className:g.default.handle},h.default.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.delInfo(t)}},"\u5220\u9664"),h.default.createElement(r.default,{type:"vertical"}),h.default.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.uptInfo("edit",t)}},"\u4fee\u6539"))}}],c=(0,i.default)({showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100"]},n),f={selectedRowKeys:u,onChange:this.handleRowSelectChange,getCheckboxProps:function(e){return{disabled:e.disabled}}};return h.default.createElement("div",{className:"".concat(g.default.classManageTable," ").concat(g.default.manageTable)},h.default.createElement(d.default,{loading:o,rowKey:function(e){return e.id},dataSource:l,columns:s,rowSelection:f,pagination:c,onChange:this.handleTableChange}))}}]),a}(h.Component)),v=m;a.default=v}}]);